<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DirectRent - Tenant to Owner Platform</title>
    <style>
        body {
            background-color: #f5f5f5;
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
        }
        
        #home-page {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        header {
            display: flex;
            justify-content: space-between;
            padding: 20px;
            background: white;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .property-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            padding: 20px;
        }
        
        .property-card {
            background: white;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        #listing-form-section {
            max-width: 600px;
            margin: 20px auto;
            padding: 20px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        #listingForm input, 
        #listingForm textarea,
        #listingForm select {
            width: 100%;
            padding: 10px;
            margin-bottom: 15px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        
        #listingForm button {
            background: #4CAF50;
            color: white;
            padding: 12px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .search-section {
            padding: 20px;
            text-align: center;
        }
        
        .filters > * {
            margin: 0 10px;
            padding: 8px;
        }
    </style>
    
    <!-- Firebase Setup -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.0/firebase-app.js";
        import { getFirestore, collection, addDoc, getDocs } from "https://www.gstatic.com/firebasejs/11.6.0/firebase-firestore.js";

        const firebaseConfig = {
            apiKey: "AIzaSyCeGlCWvi1bmF9smbc0_ZoRtj_LGfQjTm4",
            authDomain: "directrent11-f9bd0.firebaseapp.com",
            projectId: "directrent11-f9bd0",
            storageBucket: "directrent11-f9bd0.firebasestorage.app",
            messagingSenderId: "241792968671",
            appId: "1:241792968671:web:470f9e24f2da2a231b466a",
            measurementId: "G-XXFXFE7NZR"
        };

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);
        window.firebaseModules = { db, collection, addDoc, getDocs };
    </script>
</head>

<body>
    <div id="home-page">
        <header>
            <div class="logo">DirectRent</div>
            <nav>
                <a href="#" id="list-property-link">List Property</a>
                <a href="#login">Login</a>
            </nav>
        </header>

        <section class="search-section">
            <h2>Find Properties Directly From Owners</h2>
            <div class="filters">
                <select id="property-type">
                    <option value="rent">For Rent</option>
                    <option value="sale">For Sale</option>
                </select>
                <input type="text" placeholder="Location">
                <input type="number" placeholder="Min Price">
                <input type="number" placeholder="Max Price">
                <button>Search</button>
            </div>
        </section>

        <!-- Listing Form Section (initially hidden) -->
        <section id="listing-form-section" style="display: none;">
            <form id="listingForm">
                <h2>List Your Property</h2>
                <input type="text" id="title" placeholder="Property Title" required>
                <input type="number" id="price" placeholder="Monthly Rent" required>
                <input type="number" id="bedrooms" placeholder="Bedrooms">
                <input type="number" id="bathrooms" placeholder="Bathrooms">
                <input type="text" id="location" placeholder="Location">
                <textarea id="description" placeholder="Description" rows="4"></textarea>
                <button type="submit">Submit Listing</button>
            </form>
        </section>

        <!-- Property Listings Display -->
        <section class="property-grid" id="listings-container">
            <h2>Current Listings</h2>
            <!-- Listings will appear here automatically -->
        </section>
    </div>

    <script>
        // Show listing form when "List Property" is clicked
        document.getElementById('list-property-link').addEventListener('click', (e) => {
            e.preventDefault();
            document.getElementById('listing-form-section').style.display = 'block';
            window.scrollTo({ top: document.getElementById('listing-form-section').offsetTop, behavior: 'smooth' });
        });

        // Form submission handler
        document.getElementById('listingForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            
            const { db, collection, addDoc } = window.firebaseModules;
            
            await addDoc(collection(db, "listings"), {
                title: document.getElementById('title').value,
                price: document.getElementById('price').value,
                bedrooms: document.getElementById('bedrooms').value || 0,
                bathrooms: document.getElementById('bathrooms').value || 0,
                location: document.getElementById('location').value,
                description: document.getElementById('description').value,
                createdAt: new Date()
            });
            
            alert('Listing saved successfully!');
            e.target.reset();
            document.getElementById('listing-form-section').style.display = 'none';
            loadListings();
        });

        // Load and display listings
        async function loadListings() {
            const { db, collection, getDocs } = window.firebaseModules;
            const container = document.getElementById('listings-container');
            
            const querySnapshot = await getDocs(collection(db, "listings"));
            container.innerHTML = '<h2>Current Listings</h2>';
            
            if (querySnapshot.empty) {
                container.innerHTML += '<p>No listings available yet.</p>';
                return;
            }
            
            querySnapshot.forEach(doc => {
                const data = doc.data();
                container.innerHTML += `
                    <div class="property-card">
                        <h3>${data.title}</h3>
                        <p><strong>$${data.price}</strong>/month</p>
                        <p>${data.bedrooms || 0} beds | ${data.bathrooms || 0} baths</p>
                        <p>Location: ${data.location || 'Not specified'}</p>
                        <p>${data.description || ''}</p>
                        <small>Posted: ${data.createdAt?.toDate().toLocaleDateString() || 'Unknown date'}</small>
                    </div>
                `;
            });
        }
        
        // Load listings when page opens
        document.addEventListener('DOMContentLoaded', loadListings);
    </script>
</body>
</html>
